<div class="page-header">
  <h1>JSON beautifier</h1>
</div>

<%= form_tag json_beautifier_tools_url do %>
    <div class="row">
      <div class="col-xs-12">
        <div class="text-right">
          <a class="btn btn-default clipboard-button" data-clipboard-target="#formated_result"><i class="fa fa-files-o"></i></a>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-xs-12 col-md-6">
        <div class="form-group <%= 'has-error' if flash[:error] %>">
          <label for="initial_text">Text to beautify</label>
          <%= text_area_tag :initial_text, @initial_text, :rows => 15, :class => "form-control" %>
        </div>

        <div class="form-group">
          <%= submit_tag 'Generate', :class => 'btn btn-primary' %>
        </div>
      </div>

      <div class="col-xs-12 col-md-6">
        <div class="form-group">
          <label>Formatted result</label>
          <div id="formated_interactive_result"></div>
          <pre id="formated_result"><%= @final_text %></pre>
        </div>
      </div>
    </div>
<% end %>

<script>
    var clipboard = new Clipboard('.clipboard-button');

     document.getElementById("formated_interactive_result").appendChild(
        renderjson(JSON.parse($('#formated_result').html()))
    );
</script>